-- NotHub Loader
-- Professional Script Loader with Game Detection

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Game Detection Function
local function detectGame()
    local placeId = game.PlaceId
    
    -- Game place IDs (You'll need to update these with actual IDs)
    local gameIds = {
        [142823291] = "Murder Mystery 2",  -- Murder Mystery 2
        [13772394325] = "Blade Ball",      -- Blade Ball
        [17625359962] = "Rivals",
        [79546208627805] = "99 Nights in the forest,
        [18687417158] = "Forsaken",
        [16732694052] = "Fisch",
    }
    
    -- Check if current place ID is in our list
    if gameIds[placeId] then
        return gameIds[placeId]
    end
    
    -- If not found, return Universal
    return "NotHub Universal"
end

-- Script Execution Function
local function executeScript(gameName)
    -- Your loadstrings will go here
    local scripts = {
        ["Murder Mystery 2"] = "YOUR_MURDER_MYSTERY_2_LOADSTRING_HERE",
        ["Rivals"] = "loadstring(game:HttpGet("https://raw.githubusercontent.com/nothubbb/not-hub-scripts/refs/heads/main/Rivals.lua"))()",
        ["99 Nights in the forest"] = "loadstring(game:HttpGet("https://raw.githubusercontent.com/nothubbb/not-hub-scripts/refs/heads/main/99nightsintheforest.lua"))()",
        ["Forsaken"] = "loadstring(game:HttpGet("https://raw.githubusercontent.com/nothubbb/not-hub-scripts/refs/heads/main/Forsaken.lua"))()",
        ["Fisch"] = "",
        ["Blade Ball"] = "YOUR_BLADE_BALL_LOADSTRING_HERE",
        ["NotHub Universal"] = "loadstring(game:HttpGet("https://raw.githubusercontent.com/nothubbb/not-hub-scripts/refs/heads/main/NotHubUniversal.lua"))()"
    }
    
    local loadstring = scripts[gameName]
    
    if loadstring and loadstring ~= "YOUR_LOADSTRING_HERE" then
        local success, err = pcall(function()
            loadstring(loadstring)()
        end)
        
        if success then
            return true, "Successfully executed " .. gameName .. " script!"
        else
            return false, "Error executing script: " .. tostring(err)
        end
    else
        return false, "No script found for " .. gameName
    end
end

-- Create Loading Screen
local function createLoadingScreen()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "NotHubLoader"
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    screenGui.ResetOnSpawn = false

    -- Background
    local background = Instance.new("Frame")
    background.Name = "Background"
    background.Size = UDim2.new(1, 0, 1, 0)
    background.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
    background.BorderSizePixel = 0
    background.Parent = screenGui

    -- Main Container
    local container = Instance.new("Frame")
    container.Name = "Container"
    container.Size = UDim2.new(0, 400, 0, 300)
    container.Position = UDim2.new(0.5, -200, 0.5, -150)
    container.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
    container.BorderSizePixel = 0
    container.Parent = background

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)
    corner.Parent = container

    -- Logo/Title
    local title = Instance.new("TextLabel")
    title.Name = "Title"
    title.Size = UDim2.new(1, 0, 0, 60)
    title.Position = UDim2.new(0, 0, 0, 20)
    title.BackgroundTransparency = 1
    title.Text = "NotHub Loader"
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.TextSize = 24
    title.Font = Enum.Font.GothamBold
    title.Parent = container

    -- Subtitle
    local subtitle = Instance.new("TextLabel")
    subtitle.Name = "Subtitle"
    subtitle.Size = UDim2.new(1, 0, 0, 30)
    subtitle.Position = UDim2.new(0, 0, 0, 60)
    subtitle.BackgroundTransparency = 1
    subtitle.Text = "NotHub Script Loader"
    subtitle.TextColor3 = Color3.fromRGB(200, 200, 200)
    subtitle.TextSize = 14
    subtitle.Font = Enum.Font.Gotham
    subtitle.Parent = container

    -- Loading Text
    local loadingText = Instance.new("TextLabel")
    loadingText.Name = "LoadingText"
    loadingText.Size = UDim2.new(1, 0, 0, 30)
    loadingText.Position = UDim2.new(0, 0, 0, 120)
    loadingText.BackgroundTransparency = 1
    loadingText.Text = "Detecting Game..."
    loadingText.TextColor3 = Color3.fromRGB(255, 255, 255)
    loadingText.TextSize = 16
    loadingText.Font = Enum.Font.Gotham
    loadingText.Parent = container

    -- Game Info
    local gameInfo = Instance.new("TextLabel")
    gameInfo.Name = "GameInfo"
    gameInfo.Size = UDim2.new(1, 0, 0, 40)
    gameInfo.Position = UDim2.new(0, 0, 0, 150)
    gameInfo.BackgroundTransparency = 1
    gameInfo.Text = "Place ID: " .. game.PlaceId
    gameInfo.TextColor3 = Color3.fromRGB(150, 150, 150)
    gameInfo.TextSize = 12
    gameInfo.Font = Enum.Font.Gotham
    gameInfo.Parent = container

    -- Loading Bar Background
    local loadingBarBg = Instance.new("Frame")
    loadingBarBg.Name = "LoadingBarBg"
    loadingBarBg.Size = UDim2.new(0.8, 0, 0, 20)
    loadingBarBg.Position = UDim2.new(0.1, 0, 0, 200)
    loadingBarBg.BackgroundColor3 = Color3.fromRGB(50, 50, 65)
    loadingBarBg.BorderSizePixel = 0
    loadingBarBg.Parent = container

    local barCorner = Instance.new("UICorner")
    barCorner.CornerRadius = UDim.new(0, 10)
    barCorner.Parent = loadingBarBg

    -- Loading Bar Fill
    local loadingBar = Instance.new("Frame")
    loadingBar.Name = "LoadingBar"
    loadingBar.Size = UDim2.new(0, 0, 1, 0)
    loadingBar.Position = UDim2.new(0, 0, 0, 0)
    loadingBar.BackgroundColor3 = Color3.fromRGB(65, 105, 225)
    loadingBar.BorderSizePixel = 0
    loadingBar.Parent = loadingBarBg

    local barFillCorner = Instance.new("UICorner")
    barFillCorner.CornerRadius = UDim.new(0, 10)
    barFillCorner.Parent = loadingBar

    -- Percentage Text
    local percentText = Instance.new("TextLabel")
    percentText.Name = "PercentText"
    percentText.Size = UDim2.new(1, 0, 0, 20)
    percentText.Position = UDim2.new(0, 0, 0, 225)
    percentText.BackgroundTransparency = 1
    percentText.Text = "0%"
    percentText.TextColor3 = Color3.fromRGB(200, 200, 200)
    percentText.TextSize = 14
    percentText.Font = Enum.Font.Gotham
    percentText.Parent = container

    screenGui.Parent = playerGui
    
    return screenGui, loadingBar, loadingText, percentText, gameInfo
end

-- Animate Loading Screen
local function animateLoading(loadingBar, loadingText, percentText, gameInfo, detectedGame)
    local stages = {
        {text = "Initializing...", duration = 1.0},
        {text = "Detecting game environment...", duration = 1.5},
        {text = "Game detected: " .. detectedGame, duration = 1.0},
        {text = "Loading scripts...", duration = 2.0},
        {text = "Finalizing...", duration = 1.0}
    }
    
    local totalDuration = 0
    for _, stage in ipairs(stages) do
        totalDuration = totalDuration + stage.duration
    end
    
    local startTime = tick()
    local currentProgress = 0
    
    -- Animation loop
    while currentProgress < 1 do
        local elapsed = tick() - startTime
        currentProgress = math.min(elapsed / totalDuration, 1)
        
        -- Update loading bar
        loadingBar.Size = UDim2.new(currentProgress, 0, 1, 0)
        percentText.Text = string.format("%d%%", math.floor(currentProgress * 100))
        
        -- Update stage text based on progress
        local stageProgress = 0
        for i, stage in ipairs(stages) do
            stageProgress = stageProgress + stage.duration
            if elapsed <= stageProgress then
                loadingText.Text = stage.text
                break
            end
        end
        
        RunService.Heartbeat:Wait()
    end
    
    -- Ensure 100%
    loadingBar.Size = UDim2.new(1, 0, 1, 0)
    percentText.Text = "100%"
    loadingText.Text = "Ready to execute!"
    
    wait(0.5) -- Brief pause at 100%
end

-- Main Execution Function
local function main()
    -- Create loading screen
    local loadingScreen, loadingBar, loadingText, percentText, gameInfo = createLoadingScreen()
    
    -- Detect game
    local detectedGame = detectGame()
    gameInfo.Text = "Game: " .. detectedGame .. " | Place ID: " .. game.PlaceId
    
    -- Animate loading process
    animateLoading(loadingBar, loadingText, percentText, gameInfo, detectedGame)
    
    -- Execute the appropriate script
    local success, message = executeScript(detectedGame)
    
    -- Show result
    if success then
        loadingText.Text = "✓ " .. message
        loadingText.TextColor3 = Color3.fromRGB(76, 175, 80)
    else
        loadingText.Text = "✗ " .. message
        loadingText.TextColor3 = Color3.fromRGB(244, 67, 54)
    end
    
    percentText.Text = "Completed"
    
    -- Close loading screen after delay
    wait(3)
    loadingScreen:Destroy()
    
    -- Optional: Show brief success notification
    if success then
        local notifyGui = Instance.new("ScreenGui")
        notifyGui.Name = "NotHubNotify"
        notifyGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
        notifyGui.ResetOnSpawn = false
        
        local notifyFrame = Instance.new("Frame")
        notifyFrame.Size = UDim2.new(0, 300, 0, 80)
        notifyFrame.Position = UDim2.new(1, -320, 1, -100)
        notifyFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 50)
        notifyFrame.BorderSizePixel = 0
        notifyFrame.Parent = notifyGui
        
        local notifyCorner = Instance.new("UICorner")
        notifyCorner.CornerRadius = UDim.new(0, 8)
        notifyCorner.Parent = notifyFrame
        
        local notifyText = Instance.new("TextLabel")
        notifyText.Size = UDim2.new(1, -20, 1, -20)
        notifyText.Position = UDim2.new(0, 10, 0, 10)
        notifyText.BackgroundTransparency = 1
        notifyText.Text = "NotHub Loader\nScript executed successfully!"
        notifyText.TextColor3 = Color3.fromRGB(76, 175, 80)
        notifyText.TextSize = 14
        notifyText.Font = Enum.Font.Gotham
        notifyText.TextYAlignment = Enum.TextYAlignment.Top
        notifyText.Parent = notifyFrame
        
        notifyGui.Parent = playerGui
        
        -- Auto-remove notification
        delay(5, function()
            notifyGui:Destroy()
        end)
    end
end

-- Start the loader
local success, err = pcall(main)

if not success then
    warn("NotHub Loader Error: " .. tostring(err))
    
    -- Simple error notification
    local errorGui = Instance.new("ScreenGui")
    errorGui.Name = "NotHubError"
    errorGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    local errorFrame = Instance.new("Frame")
    errorFrame.Size = UDim2.new(0, 300, 0, 100)
    errorFrame.Position = UDim2.new(0.5, -150, 0.5, -50)
    errorFrame.BackgroundColor3 = Color3.fromRGB(50, 35, 35)
    errorFrame.BorderSizePixel = 0
    errorFrame.Parent = errorGui
    
    local errorCorner = Instance.new("UICorner")
    errorCorner.CornerRadius = UDim.new(0, 8)
    errorCorner.Parent = errorFrame
    
    local errorText = Instance.new("TextLabel")
    errorText.Size = UDim2.new(1, -20, 1, -20)
    errorText.Position = UDim2.new(0, 10, 0, 10)
    errorText.BackgroundTransparency = 1
    errorText.Text = "NotHub Loader Error\n" .. tostring(err)
    errorText.TextColor3 = Color3.fromRGB(244, 67, 54)
    errorText.TextSize = 14
    errorText.Font = Enum.Font.Gotham
    errorText.TextYAlignment = Enum.TextYAlignment.Top
    errorText.Parent = errorFrame
    
    errorGui.Parent = playerGui
end